<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Quiz Game</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
			background: linear-gradient(135deg, #0a0f1f 0%, #00040c 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

		.container {
			background: #0b1220;
			border-radius: 20px;
			box-shadow: 0 20px 50px rgba(0, 229, 255, 0.08), 0 0 0 1px rgba(0, 229, 255, 0.06) inset;
            max-width: 800px;
            width: 100%;
            overflow: hidden;
            transition: all 0.3s ease;
			color: #e6f1ff;
        }

		.header {
			padding: 30px;
			text-align: center;
			background: linear-gradient(135deg, #1a1f3b 0%, #0d1326 100%);
			color: #e6f1ff;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }

		.subject-selector {
			padding: 30px;
			text-align: center;
			background: #0d1528;
        }

        .subject-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
            margin-top: 20px;
        }

		.subject-btn {
            padding: 15px 30px;
            border: none;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 140px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

		.subject-btn:hover {
			transform: translateY(-2px);
			box-shadow: 0 10px 25px rgba(0, 229, 255, 0.25);
        }

		.subject-btn:focus {
			outline: 3px solid rgba(0, 229, 255, 0.6);
			outline-offset: 2px;
        }

		.science-btn {
			background: linear-gradient(135deg, #ff00cc, #ff4d6d);
			color: #0b1220;
			text-shadow: 0 0 6px rgba(255, 0, 204, 0.4);
        }

		.maths-btn {
			background: linear-gradient(135deg, #00e5ff, #00ffa3);
			color: #0b1220;
			text-shadow: 0 0 6px rgba(0, 255, 163, 0.4);
        }

		.cs-btn {
			background: linear-gradient(135deg, #7c4dff, #00e5ff);
			color: #0b1220;
			text-shadow: 0 0 6px rgba(124, 77, 255, 0.4);
        }

        .quiz-container {
            padding: 40px;
            display: none;
        }

        .quiz-container.active {
            display: block;
        }

        .question-header {
            margin-bottom: 30px;
        }

		.subject-badge {
            display: inline-block;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 15px;
        }

		.science-badge {
			background: linear-gradient(135deg, #ff00cc, #ff4d6d);
			color: #0b1220;
        }

		.maths-badge {
			background: linear-gradient(135deg, #00e5ff, #00ffa3);
			color: #0b1220;
        }

		.cs-badge {
			background: linear-gradient(135deg, #7c4dff, #00e5ff);
			color: #0b1220;
        }

		.question-text {
			font-size: 1.5rem;
			font-weight: 600;
			color: #e6f1ff;
			line-height: 1.6;
			margin-bottom: 30px;
			text-shadow: 0 0 8px rgba(0, 229, 255, 0.2);
		}

        .options-container {
            display: grid;
            gap: 15px;
            margin-bottom: 30px;
        }

		.option-btn {
			padding: 20px;
			border: 2px solid #1e2a44;
			border-radius: 15px;
			background: #0e1629;
			color: #cfe7ff;
			font-size: 1.1rem;
			cursor: pointer;
			transition: all 0.3s ease;
			text-align: left;
			position: relative;
			overflow: hidden;
		}

		.option-btn:hover {
			border-color: #00e5ff;
			transform: translateY(-2px);
			box-shadow: 0 0 18px rgba(0, 229, 255, 0.25);
		}

		.option-btn:focus {
			outline: 3px solid #00e5ff;
			outline-offset: 2px;
		}

		.option-btn.correct {
			background: linear-gradient(135deg, #00ffa3, #00e676);
			color: #0b1220;
			border-color: #00ffa3;
			box-shadow: 0 0 22px rgba(0, 255, 163, 0.35);
		}

		.option-btn.incorrect {
			background: linear-gradient(135deg, #ff1744, #ff4d6d);
			color: #0b1220;
			border-color: #ff4d6d;
			box-shadow: 0 0 22px rgba(255, 71, 87, 0.35);
		}

        .option-btn.disabled {
            pointer-events: none;
            opacity: 0.7;
        }

		.explanation {
			background: #0e1629;
			border-left: 4px solid #00e5ff;
			padding: 20px;
			border-radius: 0 10px 10px 0;
			margin-top: 20px;
			display: none;
			color: #cfe7ff;
			box-shadow: inset 0 0 12px rgba(0, 229, 255, 0.08);
		}

        .explanation.show {
            display: block;
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

		.explanation h4 {
			color: #e6f1ff;
			margin-bottom: 10px;
			font-size: 1.2rem;
			text-shadow: 0 0 6px rgba(0, 229, 255, 0.2);
		}

		.explanation p {
			color: #b5c6e0;
			line-height: 1.6;
		}

		.next-btn {
			background: linear-gradient(135deg, #7c4dff, #00e5ff);
			color: #0b1220;
			border: none;
			padding: 15px 30px;
			border-radius: 50px;
			font-size: 1.1rem;
			font-weight: 600;
			cursor: pointer;
			transition: all 0.3s ease;
			display: none;
			margin-top: 20px;
			box-shadow: 0 0 18px rgba(124, 77, 255, 0.25);
		}

		.next-btn:hover {
			transform: translateY(-2px);
			box-shadow: 0 10px 24px rgba(0, 229, 255, 0.35);
		}

		.next-btn:focus {
			outline: 3px solid rgba(0, 229, 255, 0.6);
			outline-offset: 2px;
		}

        .next-btn.show {
            display: inline-block;
        }

        .quiz-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 15px;
        }

		.back-btn {
			background: linear-gradient(135deg, #14213d, #0d1326);
			color: #e6f1ff;
			border: none;
			padding: 12px 24px;
			border-radius: 50px;
			font-size: 1rem;
			font-weight: 600;
			cursor: pointer;
			transition: all 0.3s ease;
			display: flex;
			align-items: center;
			gap: 8px;
			box-shadow: 0 0 14px rgba(0, 229, 255, 0.18);
		}

		.back-btn:hover {
			transform: translateY(-2px);
			box-shadow: 0 8px 18px rgba(0, 229, 255, 0.25);
		}

		.back-btn:focus {
			outline: 3px solid rgba(0, 229, 255, 0.6);
			outline-offset: 2px;
		}

		.score-display {
			background: linear-gradient(135deg, #00ffa3, #00e5ff);
			color: #0b1220;
			padding: 12px 20px;
			border-radius: 50px;
			font-weight: 600;
			font-size: 1rem;
			display: flex;
			align-items: center;
			gap: 10px;
			box-shadow: 0 0 16px rgba(0, 229, 255, 0.25);
		}

        .score-item {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .score-icon {
            font-size: 1.2rem;
        }

        .quiz-results {
            text-align: center;
            padding: 20px;
        }

		.quiz-results h2 {
			color: #e6f1ff;
			margin-bottom: 30px;
			font-size: 2rem;
			text-shadow: 0 0 10px rgba(124, 77, 255, 0.25);
		}

        .final-score {
            margin-bottom: 30px;
        }

		.score-circle {
			width: 150px;
			height: 150px;
			border-radius: 50%;
			background: radial-gradient(circle at 30% 30%, rgba(0, 229, 255, 0.35), rgba(124, 77, 255, 0.45)), linear-gradient(135deg, #7c4dff, #00e5ff);
			display: flex;
			flex-direction: column;
			align-items: center;
			justify-content: center;
			margin: 0 auto;
			color: #0b1220;
			box-shadow: 0 10px 35px rgba(124, 77, 255, 0.35), 0 0 0 2px rgba(0, 229, 255, 0.25) inset;
		}

        .percentage {
            font-size: 2.5rem;
            font-weight: bold;
            line-height: 1;
        }

        .score-text {
            font-size: 1rem;
            opacity: 0.9;
        }

        .score-breakdown {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .score-item-large {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
            padding: 20px;
            border-radius: 15px;
            min-width: 120px;
        }

		.score-item-large.correct {
			background: linear-gradient(135deg, #00ffa3, #00e676);
			color: #0b1220;
			box-shadow: 0 0 18px rgba(0, 255, 163, 0.28);
		}

		.score-item-large.incorrect {
			background: linear-gradient(135deg, #ff1744, #ff4d6d);
			color: #0b1220;
			box-shadow: 0 0 18px rgba(255, 71, 87, 0.28);
		}

        .score-item-large .score-icon {
            font-size: 2rem;
        }

        .score-label {
            font-size: 1rem;
            font-weight: 600;
        }

        .score-value {
            font-size: 2rem;
            font-weight: bold;
        }

        .quiz-actions {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }

		.restart-btn {
			background: linear-gradient(135deg, #00ffa3, #00e676);
			color: #0b1220;
			border: none;
			padding: 15px 30px;
			border-radius: 50px;
			font-size: 1.1rem;
			font-weight: 600;
			cursor: pointer;
			transition: all 0.3s ease;
			box-shadow: 0 0 16px rgba(0, 255, 163, 0.25);
		}

		.restart-btn:hover {
			transform: translateY(-2px);
			box-shadow: 0 10px 22px rgba(0, 255, 163, 0.35);
		}

		.restart-btn:focus {
			outline: 3px solid rgba(0, 229, 255, 0.6);
			outline-offset: 2px;
		}

        @media (max-width: 768px) {
            .header h1 {
                font-size: 2rem;
            }

            .subject-buttons {
                flex-direction: column;
                align-items: center;
            }

            .subject-btn {
                width: 100%;
                max-width: 300px;
            }

            .quiz-container {
                padding: 20px;
            }

            .question-text {
                font-size: 1.3rem;
            }

            .option-btn {
                padding: 15px;
                font-size: 1rem;
            }
        }

        @media (max-width: 480px) {
            body {
                padding: 10px;
            }

            .container {
                border-radius: 15px;
            }

            .header {
                padding: 20px;
            }

            .header h1 {
                font-size: 1.8rem;
            }

            .subject-selector {
                padding: 20px;
            }

            .quiz-container {
                padding: 15px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>🧠 Interactive Quiz Game</h1>
            <p>Test your knowledge across multiple subjects</p>
        </div>

        <div class="subject-selector" id="subjectSelector">
            <h2>Choose a Subject</h2>
            <div class="subject-buttons">
                <button class="subject-btn science-btn" onclick="startQuiz('science')" tabindex="1">
                    🔬 Science
                </button>
                <button class="subject-btn maths-btn" onclick="startQuiz('maths')" tabindex="2">
                    📐 Mathematics
                </button>
                <button class="subject-btn cs-btn" onclick="startQuiz('cs')" tabindex="3">
                    💻 Computer Science
                </button>
            </div>
        </div>

        <div class="quiz-container" id="quizContainer">
            <div class="quiz-header">
                <button class="back-btn" onclick="goBack()" tabindex="4">
                    ← Back to Subjects
                </button>
                <div class="score-display" id="scoreDisplay">
                    <div class="score-item">
                        <span class="score-icon">✅</span>
                        <span id="correctCount">0</span>
                    </div>
                    <div class="score-item">
                        <span class="score-icon">❌</span>
                        <span id="incorrectCount">0</span>
                    </div>
                </div>
            </div>
            
            <div class="question-header">
                <div class="subject-badge" id="subjectBadge"></div>
                <div class="question-text" id="questionText"></div>
            </div>

            <div class="options-container" id="optionsContainer"></div>

            <div class="explanation" id="explanation">
                <h4>Explanation:</h4>
                <p id="explanationText"></p>
            </div>

            <button class="next-btn" id="nextBtn" onclick="nextQuestion()" tabindex="5">
                Next Question
            </button>
        </div>
    </div>

    <script>
        // Question bank with ≥6 questions per subject
        const questionBank = {
            science: [
                {
                    question: "What is the chemical symbol for gold?",
                    options: ["Go", "Gd", "Au", "Ag"],
                    correct: 2,
                    explanation: "Au is the chemical symbol for gold, derived from the Latin word 'aurum' meaning gold."
                },
                {
                    question: "Which planet is known as the Red Planet?",
                    options: ["Venus", "Mars", "Jupiter", "Saturn"],
                    correct: 1,
                    explanation: "Mars is called the Red Planet due to iron oxide (rust) on its surface giving it a reddish appearance."
                },
                {
                    question: "What is the speed of light in vacuum?",
                    options: ["299,792,458 m/s", "300,000,000 m/s", "299,792,458 km/s", "3 × 10⁸ m/s"],
                    correct: 0,
                    explanation: "The exact speed of light in vacuum is 299,792,458 meters per second, which is approximately 3 × 10⁸ m/s."
                },
                {
                    question: "Which gas makes up about 78% of Earth's atmosphere?",
                    options: ["Oxygen", "Carbon Dioxide", "Nitrogen", "Argon"],
                    correct: 2,
                    explanation: "Nitrogen makes up approximately 78% of Earth's atmosphere, while oxygen makes up about 21%."
                },
                {
                    question: "What is the smallest unit of matter?",
                    options: ["Molecule", "Atom", "Proton", "Quark"],
                    correct: 1,
                    explanation: "An atom is the smallest unit of matter that retains the properties of an element. Quarks are smaller but don't exist independently."
                },
                {
                    question: "Which scientist developed the theory of relativity?",
                    options: ["Isaac Newton", "Albert Einstein", "Galileo Galilei", "Stephen Hawking"],
                    correct: 1,
                    explanation: "Albert Einstein developed both the special theory of relativity (1905) and general theory of relativity (1915)."
                },
                {
                    question: "What is the pH of pure water?",
                    options: ["5", "6", "7", "8"],
                    correct: 2,
                    explanation: "Pure water has a pH of 7, which is considered neutral on the pH scale."
                },
                {
                    question: "Which organelle is known as the powerhouse of the cell?",
                    options: ["Nucleus", "Mitochondria", "Ribosome", "Endoplasmic reticulum"],
                    correct: 1,
                    explanation: "Mitochondria are called the powerhouse of the cell because they produce ATP, the cell's energy currency."
                },
                {
                    question: "What is the chemical formula for water?",
                    options: ["H2O", "CO2", "NaCl", "O2"],
                    correct: 0,
                    explanation: "Water is composed of two hydrogen atoms and one oxygen atom, giving it the chemical formula H2O."
                },
                {
                    question: "Which force keeps planets in orbit around the sun?",
                    options: ["Magnetic force", "Gravitational force", "Electric force", "Nuclear force"],
                    correct: 1,
                    explanation: "Gravitational force is what keeps planets in orbit around the sun, as described by Newton's law of universal gravitation."
                },
                {
                    question: "What is the hardest natural substance on Earth?",
                    options: ["Gold", "Iron", "Diamond", "Quartz"],
                    correct: 2,
                    explanation: "Diamond is the hardest known natural substance on Earth, with a Mohs hardness of 10."
                },
                {
                    question: "Which blood type is known as the universal donor?",
                    options: ["A+", "B+", "AB+", "O-"],
                    correct: 3,
                    explanation: "O- blood type is considered the universal donor because it can be given to people with any blood type."
                },
                {
                    question: "What is the largest planet in our solar system?",
                    options: ["Earth", "Saturn", "Jupiter", "Neptune"],
                    correct: 2,
                    explanation: "Jupiter is the largest planet in our solar system, with a mass greater than all other planets combined."
                },
                {
                    question: "Which gas do plants absorb from the atmosphere?",
                    options: ["Oxygen", "Nitrogen", "Carbon dioxide", "Helium"],
                    correct: 2,
                    explanation: "Plants absorb carbon dioxide from the atmosphere during photosynthesis to produce glucose and release oxygen."
                },
                {
                    question: "What is the freezing point of water in Celsius?",
                    options: ["-10°C", "0°C", "10°C", "32°C"],
                    correct: 1,
                    explanation: "Water freezes at 0°C (32°F) under standard atmospheric pressure."
                },
                {
                    question: "Which scientist discovered the laws of motion?",
                    options: ["Albert Einstein", "Isaac Newton", "Galileo Galilei", "Charles Darwin"],
                    correct: 1,
                    explanation: "Isaac Newton discovered the three laws of motion, which form the foundation of classical mechanics."
                },
                {
                    question: "What is the chemical symbol for sodium?",
                    options: ["So", "Na", "Sa", "No"],
                    correct: 1,
                    explanation: "Na is the chemical symbol for sodium, derived from the Latin word 'natrium'."
                },
                {
                    question: "Which process converts light energy into chemical energy?",
                    options: ["Respiration", "Photosynthesis", "Digestion", "Fermentation"],
                    correct: 1,
                    explanation: "Photosynthesis converts light energy from the sun into chemical energy stored in glucose molecules."
                },
                {
                    question: "What is the speed of sound in air at room temperature?",
                    options: ["300 m/s", "343 m/s", "400 m/s", "500 m/s"],
                    correct: 1,
                    explanation: "The speed of sound in air at room temperature (20°C) is approximately 343 meters per second."
                }
            ],
            maths: [
                {
                    question: "What is the value of π (pi) to two decimal places?",
                    options: ["3.14", "3.16", "3.18", "3.20"],
                    correct: 0,
                    explanation: "Pi (π) is approximately 3.14159, which rounds to 3.14 when expressed to two decimal places."
                },
                {
                    question: "What is the derivative of x²?",
                    options: ["x", "2x", "2x²", "x²/2"],
                    correct: 1,
                    explanation: "Using the power rule, the derivative of x² is 2x¹ = 2x."
                },
                {
                    question: "What is the area of a circle with radius 7?",
                    options: ["49π", "14π", "44π", "154π"],
                    correct: 0,
                    explanation: "The area of a circle is πr². With radius 7, the area is π × 7² = 49π."
                },
                {
                    question: "What is the sum of angles in a triangle?",
                    options: ["90°", "180°", "270°", "360°"],
                    correct: 1,
                    explanation: "The sum of interior angles in any triangle is always 180°."
                },
                {
                    question: "What is the square root of 144?",
                    options: ["11", "12", "13", "14"],
                    correct: 1,
                    explanation: "12 × 12 = 144, so the square root of 144 is 12."
                },
                {
                    question: "What is the value of 2⁵?",
                    options: ["16", "32", "64", "128"],
                    correct: 1,
                    explanation: "2⁵ = 2 × 2 × 2 × 2 × 2 = 32."
                },
                {
                    question: "What is the slope of the line y = 3x + 5?",
                    options: ["3", "5", "3/5", "5/3"],
                    correct: 0,
                    explanation: "In the equation y = mx + b, m is the slope. For y = 3x + 5, the slope is 3."
                },
                {
                    question: "What is the factorial of 5 (5!)?",
                    options: ["60", "120", "240", "720"],
                    correct: 1,
                    explanation: "5! = 5 × 4 × 3 × 2 × 1 = 120."
                },
                {
                    question: "What is the integral of 2x with respect to x?",
                    options: ["x²", "x² + C", "2x²", "2x² + C"],
                    correct: 1,
                    explanation: "The integral of 2x is x² + C, where C is the constant of integration."
                },
                {
                    question: "What is the value of log₁₀(100)?",
                    options: ["1", "2", "10", "100"],
                    correct: 1,
                    explanation: "log₁₀(100) = 2 because 10² = 100."
                },
                {
                    question: "What is the circumference of a circle with diameter 14?",
                    options: ["7π", "14π", "21π", "28π"],
                    correct: 1,
                    explanation: "Circumference = π × diameter = π × 14 = 14π."
                },
                {
                    question: "What is the value of sin(90°)?",
                    options: ["0", "0.5", "1", "√2/2"],
                    correct: 2,
                    explanation: "sin(90°) = 1, as the sine of a right angle is 1."
                },
                {
                    question: "What is the quadratic formula?",
                    options: ["x = (-b ± √(b²-4ac))/2a", "x = (b ± √(b²-4ac))/2a", "x = (-b ± √(b²+4ac))/2a", "x = (b ± √(b²+4ac))/2a"],
                    correct: 0,
                    explanation: "The quadratic formula is x = (-b ± √(b²-4ac))/2a for equations of the form ax² + bx + c = 0."
                },
                {
                    question: "What is the probability of rolling a 6 on a fair die?",
                    options: ["1/3", "1/4", "1/5", "1/6"],
                    correct: 3,
                    explanation: "A fair die has 6 faces, so the probability of rolling a 6 is 1/6."
                },
                {
                    question: "What is the median of the numbers 1, 3, 5, 7, 9?",
                    options: ["3", "4", "5", "6"],
                    correct: 2,
                    explanation: "The median is the middle value when numbers are arranged in order. Here it's 5."
                },
                {
                    question: "What is the derivative of sin(x)?",
                    options: ["cos(x)", "-cos(x)", "sin(x)", "-sin(x)"],
                    correct: 0,
                    explanation: "The derivative of sin(x) is cos(x)."
                },
                {
                    question: "What is the volume of a cube with side length 3?",
                    options: ["9", "18", "27", "36"],
                    correct: 2,
                    explanation: "Volume of a cube = side³ = 3³ = 27."
                },
                {
                    question: "What is the value of tan(45°)?",
                    options: ["0", "1", "√2", "√3"],
                    correct: 1,
                    explanation: "tan(45°) = 1, as tan(45°) = sin(45°)/cos(45°) = (√2/2)/(√2/2) = 1."
                },
                {
                    question: "What is the next number in the sequence: 2, 4, 8, 16, ?",
                    options: ["20", "24", "32", "64"],
                    correct: 2,
                    explanation: "This is a geometric sequence where each term is multiplied by 2. 16 × 2 = 32."
                }
            ],
            cs: [
                {
                    question: "What does HTML stand for?",
                    options: ["HyperText Markup Language", "High Tech Modern Language", "Home Tool Markup Language", "Hyperlink and Text Markup Language"],
                    correct: 0,
                    explanation: "HTML stands for HyperText Markup Language, the standard markup language for creating web pages."
                },
                {
                    question: "Which programming language was created by Guido van Rossum?",
                    options: ["Java", "Python", "C++", "JavaScript"],
                    correct: 1,
                    explanation: "Python was created by Guido van Rossum and first released in 1991."
                },
                {
                    question: "What is the time complexity of binary search?",
                    options: ["O(n)", "O(log n)", "O(n²)", "O(1)"],
                    correct: 1,
                    explanation: "Binary search has O(log n) time complexity because it eliminates half of the search space in each iteration."
                },
                {
                    question: "Which data structure follows LIFO (Last In, First Out) principle?",
                    options: ["Queue", "Stack", "Array", "Linked List"],
                    correct: 1,
                    explanation: "A stack follows the LIFO principle where the last element added is the first one to be removed."
                },
                {
                    question: "What does API stand for?",
                    options: ["Application Programming Interface", "Advanced Programming Interface", "Automated Program Integration", "Application Process Integration"],
                    correct: 0,
                    explanation: "API stands for Application Programming Interface, which allows different software applications to communicate."
                },
                {
                    question: "Which protocol is used for secure web communication?",
                    options: ["HTTP", "FTP", "HTTPS", "SMTP"],
                    correct: 2,
                    explanation: "HTTPS (HTTP Secure) uses SSL/TLS encryption to provide secure communication over the internet."
                },
                {
                    question: "What is the purpose of a database index?",
                    options: ["To store data", "To improve query performance", "To backup data", "To validate data"],
                    correct: 1,
                    explanation: "Database indexes are used to improve query performance by providing faster access to data."
                },
                {
                    question: "Which sorting algorithm has the best average-case time complexity?",
                    options: ["Bubble Sort", "Quick Sort", "Selection Sort", "Insertion Sort"],
                    correct: 1,
                    explanation: "Quick Sort has an average-case time complexity of O(n log n), making it one of the most efficient sorting algorithms."
                },
                {
                    question: "What does CSS stand for?",
                    options: ["Computer Style Sheets", "Creative Style Sheets", "Cascading Style Sheets", "Colorful Style Sheets"],
                    correct: 2,
                    explanation: "CSS stands for Cascading Style Sheets, used to style and layout web pages."
                },
                {
                    question: "Which programming paradigm does Java primarily follow?",
                    options: ["Functional", "Procedural", "Object-Oriented", "Logic"],
                    correct: 2,
                    explanation: "Java is primarily an object-oriented programming language, focusing on objects and classes."
                },
                {
                    question: "What is the time complexity of linear search?",
                    options: ["O(1)", "O(log n)", "O(n)", "O(n²)"],
                    correct: 2,
                    explanation: "Linear search has O(n) time complexity as it may need to check every element in the worst case."
                },
                {
                    question: "Which protocol is used for sending emails?",
                    options: ["HTTP", "FTP", "SMTP", "TCP"],
                    correct: 2,
                    explanation: "SMTP (Simple Mail Transfer Protocol) is used for sending emails."
                },
                {
                    question: "What is a variable in programming?",
                    options: ["A fixed value", "A storage location with a name", "A function", "A loop"],
                    correct: 1,
                    explanation: "A variable is a storage location identified by a memory address and an associated symbolic name."
                },
                {
                    question: "Which data structure uses FIFO (First In, First Out)?",
                    options: ["Stack", "Queue", "Array", "Tree"],
                    correct: 1,
                    explanation: "A queue follows the FIFO principle where the first element added is the first one to be removed."
                },
                {
                    question: "What does SQL stand for?",
                    options: ["Structured Query Language", "Simple Query Language", "Standard Query Language", "System Query Language"],
                    correct: 0,
                    explanation: "SQL stands for Structured Query Language, used for managing and manipulating databases."
                },
                {
                    question: "Which is NOT a valid data type in most programming languages?",
                    options: ["Integer", "String", "Boolean", "Loop"],
                    correct: 3,
                    explanation: "Loop is a control structure, not a data type. Common data types include integer, string, and boolean."
                },
                {
                    question: "What is the purpose of version control systems like Git?",
                    options: ["Compile code", "Track changes in code", "Execute programs", "Debug code"],
                    correct: 1,
                    explanation: "Version control systems like Git are used to track and manage changes in code over time."
                },
                {
                    question: "Which is a compiled language?",
                    options: ["JavaScript", "Python", "C++", "HTML"],
                    correct: 2,
                    explanation: "C++ is a compiled language that needs to be compiled before execution, unlike interpreted languages."
                },
                {
                    question: "What does RAM stand for?",
                    options: ["Random Access Memory", "Read Access Memory", "Rapid Access Memory", "Real-time Access Memory"],
                    correct: 0,
                    explanation: "RAM stands for Random Access Memory, a type of computer memory that can be accessed randomly."
                }
            ]
        };

        let currentSubject = '';
        let currentQuestion = null;
        let correctAnswerIndex = -1;
        let score = {
            correct: 0,
            incorrect: 0
        };
        let usedQuestions = [];
        let currentQuestionNumber = 0;
        let totalQuestions = 0;

        // Fisher-Yates shuffle algorithm
        function shuffleArray(array) {
            const shuffled = [...array];
            for (let i = shuffled.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
            }
            return shuffled;
        }

        // Pick and render a random question
        function pickAndRenderQuestion() {
            const questions = questionBank[currentSubject];
            
            // Check if all questions have been used
            if (usedQuestions.length >= totalQuestions) {
                endQuiz();
                return;
            }
            
            // Find an unused question
            let randomIndex;
            do {
                randomIndex = Math.floor(Math.random() * questions.length);
            } while (usedQuestions.includes(randomIndex));
            
            usedQuestions.push(randomIndex);
            currentQuestionNumber++;
            currentQuestion = questions[randomIndex];
            
            // Shuffle options while preserving correct answer mapping
            const shuffledOptions = shuffleArray(currentQuestion.options);
            correctAnswerIndex = shuffledOptions.indexOf(currentQuestion.options[currentQuestion.correct]);
            
            // Update UI
            document.getElementById('subjectBadge').textContent = `${currentSubject.toUpperCase()} - Question ${currentQuestionNumber}/${totalQuestions}`;
            document.getElementById('subjectBadge').className = `subject-badge ${currentSubject}-badge`;
            document.getElementById('questionText').textContent = currentQuestion.question;
            
            // Clear and populate options
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            
            shuffledOptions.forEach((option, index) => {
                const button = document.createElement('button');
                button.className = 'option-btn';
                button.textContent = option;
                button.onclick = () => selectOption(index);
                button.setAttribute('tabindex', index + 1);
                optionsContainer.appendChild(button);
            });
            
            // Reset UI state
            document.getElementById('explanation').classList.remove('show');
            document.getElementById('nextBtn').classList.remove('show');
        }

        // Handle option selection
        function selectOption(selectedIndex) {
            const options = document.querySelectorAll('.option-btn');
            
            // Disable all options
            options.forEach(btn => {
                btn.classList.add('disabled');
                btn.onclick = null;
            });
            
            // Mark correct and incorrect answers and update score
            if (selectedIndex === correctAnswerIndex) {
                options[selectedIndex].classList.add('correct');
                score.correct++;
            } else {
                options[selectedIndex].classList.add('incorrect');
                options[correctAnswerIndex].classList.add('correct');
                score.incorrect++;
            }
            
            // Update score display
            updateScoreDisplay();
            
            // Show explanation and next button
            document.getElementById('explanationText').textContent = currentQuestion.explanation;
            document.getElementById('explanation').classList.add('show');
            
            // Check if this was the last question
            if (currentQuestionNumber >= totalQuestions) {
                document.getElementById('nextBtn').textContent = 'Finish Quiz';
                document.getElementById('nextBtn').onclick = endQuiz;
            } else {
                document.getElementById('nextBtn').textContent = 'Next Question';
                document.getElementById('nextBtn').onclick = nextQuestion;
            }
            
            document.getElementById('nextBtn').classList.add('show');
            document.getElementById('nextBtn').focus();
        }

        // Update score display
        function updateScoreDisplay() {
            document.getElementById('correctCount').textContent = score.correct;
            document.getElementById('incorrectCount').textContent = score.incorrect;
        }

        // Reset score and quiz state
        function resetScore() {
            score.correct = 0;
            score.incorrect = 0;
            usedQuestions = [];
            currentQuestionNumber = 0;
            totalQuestions = 0;
            updateScoreDisplay();
        }

        // End quiz and show final results
        function endQuiz() {
            const totalAnswered = score.correct + score.incorrect;
            const percentage = totalAnswered > 0 ? Math.round((score.correct / totalAnswered) * 100) : 0;
            
            // Hide quiz content
            document.getElementById('questionText').style.display = 'none';
            document.getElementById('optionsContainer').style.display = 'none';
            document.getElementById('explanation').style.display = 'none';
            document.getElementById('nextBtn').style.display = 'none';
            
            // Show final results
            const resultsHTML = `
                <div class="quiz-results">
                    <h2>🎉 Quiz Complete!</h2>
                    <div class="final-score">
                        <div class="score-circle">
                            <span class="percentage">${percentage}%</span>
                            <span class="score-text">Final Score</span>
                        </div>
                    </div>
                    <div class="score-breakdown">
                        <div class="score-item-large correct">
                            <span class="score-icon">✅</span>
                            <span class="score-label">Correct</span>
                            <span class="score-value">${score.correct}</span>
                        </div>
                        <div class="score-item-large incorrect">
                            <span class="score-icon">❌</span>
                            <span class="score-label">Incorrect</span>
                            <span class="score-value">${score.incorrect}</span>
                        </div>
                    </div>
                    <div class="quiz-actions">
                        <button class="restart-btn" onclick="restartQuiz()">Try Again</button>
                        <button class="back-btn" onclick="goBack()">Choose Different Subject</button>
                    </div>
                </div>
            `;
            
            document.getElementById('subjectBadge').innerHTML = resultsHTML;
        }

        // Restart the current quiz
        function restartQuiz() {
            resetScore();
            totalQuestions = Math.min(questionBank[currentSubject].length, 15); // Limit to 15 questions
            usedQuestions = [];
            currentQuestionNumber = 0;
            
            // Reset UI
            document.getElementById('questionText').style.display = 'block';
            document.getElementById('optionsContainer').style.display = 'block';
            document.getElementById('explanation').style.display = 'block';
            document.getElementById('nextBtn').style.display = 'inline-block';
            
            pickAndRenderQuestion();
        }

        // Go back to subject selection
        function goBack() {
            document.getElementById('quizContainer').classList.remove('active');
            document.getElementById('subjectSelector').style.display = 'block';
            resetScore();
        }

        // Start quiz for selected subject
        function startQuiz(subject) {
            currentSubject = subject;
            resetScore(); // Reset score when starting new subject
            totalQuestions = Math.min(questionBank[currentSubject].length, 15); // Limit to 15 questions per quiz
            document.getElementById('subjectSelector').style.display = 'none';
            document.getElementById('quizContainer').classList.add('active');
            pickAndRenderQuestion();
        }

        // Load next question
        function nextQuestion() {
            pickAndRenderQuestion();
        }

        // Keyboard accessibility
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Enter' || e.key === ' ') {
                const focusedElement = document.activeElement;
                if (focusedElement.classList.contains('subject-btn')) {
                    focusedElement.click();
                } else if (focusedElement.classList.contains('option-btn') && !focusedElement.classList.contains('disabled')) {
                    focusedElement.click();
                } else if (focusedElement.classList.contains('next-btn')) {
                    focusedElement.click();
                } else if (focusedElement.classList.contains('back-btn')) {
                    focusedElement.click();
                }
            }
        });

        // Focus management
        document.getElementById('quizContainer').addEventListener('keydown', function(e) {
            if (e.key === 'Tab') {
                const options = document.querySelectorAll('.option-btn:not(.disabled)');
                if (options.length > 0 && document.activeElement.classList.contains('option-btn')) {
                    e.preventDefault();
                    const currentIndex = Array.from(options).indexOf(document.activeElement);
                    const nextIndex = (currentIndex + 1) % options.length;
                    options[nextIndex].focus();
                }
            }
        });
    </script>
</body>
</html>
